@startuml
skinparam linetype ortho

' ======================
' Packages
' ======================

package "Dés" {
  class Dé {
    + lancer() : int
  }
}

package "Donjons" {
  class Donjon {
    - carte : Carte
    - monstres : List
    - joueurs : List
    - obstacles : List
    + miseEnPlace()
    + commencerCombat()
    + terminerDonjon()
  }

  class Carte {
    - largeur : int
    - hauteur : int
    - cases : Case[][]
    + afficher()
    + placerElement()
  }

  class Case {
    - x : int
    - y : int
    - estObstacle : bool
    - contient : Objet
  }
}

package "Entités" {
  package "Caractéristiques" {
    class Caractéristique {
      - pv : int
      - force : int
      - dexterite : int
      - vitesse : int
      - initiative : int
      + getPV() : int
      + getForce() : int
      + getDexterite() : int
      + getVitesse() : int
      + getInitiative() : int
      + setPV(pv : int)
      + setForce(force : int)
      + setDexterite(dexterite : int)
      + setVitesse(vitesse : int)
      + setInitiative(initiative : int)
      + toString() : String
    }

    class CaractéristiqueMonstre {
      - classeArmure : int
      - attaque : String
      + getClasseArmure() : int
      + getAttaque() : String
      + toString() : String
    }
  }

  package "Monstres" {
    class Monstre {
      - id : int
      - espece : String
      - caracteristiques : CaractéristiqueMonstre
      + attaquer(cible : Entité)
      + toString() : String
    }
  }

  package "Personnages" {
    class Personnage {
      - nom : String
      - etat : Boolean
      - inventaire : Inventaire
      - equipement : EquipementPersonnage
      + getNom() : String
      + getEtat() : Boolean
      + setNom(nom : String)
      + setEtat(etat : Boolean)
      + attaquer(cible : Entité)
      + seDeplacer()
      + sEquiper(objet : Objet)
      + ramasser(objet : Objet)
      + toString() : String
    }

    package "Classes" {
      abstract class Classe {
        - nom : String
        + bonusCreation() : int
        + toString() : String
      }
      class Clerc
      class Guerrier
      class Magicien
      class Roublard
    }

    package "Races" {
      abstract class Race {
        - nom : String
        + bonusCreation() : int
        + toString() : String
      }
      class Elfe
      class Halfelin
      class Humain
      class Nain
    }
  }
}

class MaitreDuJeu {
  - nom : String
  + narrer()
  + controlerMonstres()
}

package "Objets" {
  abstract class Objet {
    - nom : String
    - poids : int
    + getNom() : String
    + getPoids() : int
    + setNom(nom : String)
    + setPoids(poids : int)
    + toString() : String
  }

  class Inventaire {
    - objets : List
    + ajouter(objet : Objet)
    + retirer(objet : Objet)
    + verifierCapacite() : boolean
    + toString() : String
  }

  class EquipementPersonnage {
    - equipement : List
    + toString() : String
  }

  ' Ajout : Arme et sous-classes
  abstract class Arme {
    - degats : String
    - portee : int
    + getDegats() : String
    + getPortee() : int
    + toString() : String
  }

  class ArmeCourante
  class ArmeDistance
  class ArmeGuerre

  Arme <|-- ArmeCourante
  Arme <|-- ArmeDistance
  Arme <|-- ArmeGuerre
  Objet <|-- Arme

  ' Ajout : Armure et sous-classes
  abstract class Armure {
    - classeArmure : int
    - modifForce : int
    - modifVitesse : int
    + getClasseArmure() : int
    + getModifForce() : int
    + getModifVitesse() : int
    + toString() : String
  }

  class ArmureLegere
  class ArmureIntermediaire
  class ArmureLourde

  Armure <|-- ArmureLegere
  Armure <|-- ArmureIntermediaire
  Armure <|-- ArmureLourde
  Objet <|-- Armure
}

package "Tours" {
  class Tour {
    - numeroDuTour : int
    - ordre : List<Entité>
    + determinerOrdre()
    + passerAuSuivant()
  }

  abstract class Action {
    + executer()
  }

  class Attaquer {
    - attaquant : Entité
    - cible : Entité
    + executer()
  }

  class SeDeplacer {
    - personnage : Personnage
    - destination : Case
    + executer()
  }

  class SEquiper {
    - personnage : Personnage
    - objet : Objet
    + executer()
  }

  Action <|-- Attaquer
  Action <|-- SeDeplacer
  Action <|-- SEquiper
}

' ======================
' Relations
' ======================

Personnage --> Classe
Personnage --> Race
Personnage --> Caractéristique
Personnage --> Inventaire
Personnage --> EquipementPersonnage
Monstre --> CaractéristiqueMonstre
Monstre --> Donjon : "appartient"
Classe <|-- Clerc
Classe <|-- Guerrier
Classe <|-- Magicien
Classe <|-- Roublard
Race <|-- Elfe
Race <|-- Halfelin
Race <|-- Humain
Race <|-- Nain
Objet <|-- Inventaire
Objet <|-- EquipementPersonnage
Case --|> Carte
Carte --|> Donjon
Joueur --|> Jeu
MaitreDuJeu --|> Jeu
Case "1" o-- "0..1" Objet : contient

@enduml
